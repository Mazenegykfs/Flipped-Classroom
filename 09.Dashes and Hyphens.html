<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lesson: Using Dashes and Hyphens in Technical Writing</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            /* Solid light blue background for consistency */
            background-color: #e0f7fa;
        }
        .header {
            background-color: #00796b;
            color: white;
            padding: 1rem;
            font-size: 1.25rem;
            font-weight: 600;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .card {
            background-color: white;
            border-radius: 0.75rem;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
        }
        .btn {
            /* Larger buttons for better usability */
            padding: 0.75rem 1.5rem;
            font-size: 1rem;
            border-radius: 0.5rem;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.2s;
            border: none;
        }
        .btn:hover {
            transform: translateY(-2px);
        }
        .btn-green {
            background-color: #4CAF50; /* Green */
            color: white;
        }
        .btn-green:hover {
            background-color: #45a049;
        }
        .btn-red {
            background-color: #f44336; /* Red */
            color: white;
        }
        .btn-red:hover {
            background-color: #e53935;
        }
        .btn-blue {
            background-color: #2196F3;
            color: white;
        }
        .btn-blue:hover {
            background-color: #1976D2;
        }
        h1, h2, h3 {
            color: #004d40;
        }
        .correct-answer {
            color: #2e7d32;
            font-weight: 600;
            background-color: #e8f5e9;
            padding: 2px 6px;
            border-radius: 4px;
        }
        .incorrect-answer {
            color: #c62828;
            font-weight: 600;
            background-color: #ffebee;
            padding: 2px 6px;
            border-radius: 4px;
        }
        .explanation {
            margin-top: 0.75rem;
            padding: 0.75rem;
            background-color: #eef2ff; /* Light indigo background */
            border-left: 4px solid #4f46e5; /* Indigo border */
            color: #3730a3;
            border-radius: 0.25rem;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease-out, padding 0.5s ease-out;
        }
        .explanation.show {
            max-height: 150px; /* Adjust as needed */
            padding: 0.75rem;
        }
        /* --- CHATBOT STYLES --- */
        #chat-modal {
            position: fixed;
            inset: 0;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            transition: opacity 0.3s ease;
            pointer-events: none;
        }
        #chat-modal.visible {
            opacity: 1;
            pointer-events: auto;
        }
        #chat-window::-webkit-scrollbar { width: 8px; }
        #chat-window::-webkit-scrollbar-track { background: #f1f5f9; }
        #chat-window::-webkit-scrollbar-thumb { background-color: #38bdf8; border-radius: 20px; border: 3px solid #f1f5f9; }
        .chat-bubble { max-width: 80%; word-wrap: break-word; }
        .bot-bubble { background-color: #ffffff; border: 1px solid #e2e8f0; }
        .user-bubble { background-color: #dcfce7; align-self: flex-end; }
        .typing-indicator { display: flex; align-items: center; padding: 1rem; }
        .typing-indicator span { height: 10px; width: 10px; margin: 0 2px; background-color: #94a3b8; border-radius: 50%; display: inline-block; animation: bounce 1.4s infinite ease-in-out both; }
        .typing-indicator span:nth-child(1) { animation-delay: -0.32s; }
        .typing-indicator span:nth-child(2) { animation-delay: -0.16s; }
        @keyframes bounce { 0%, 80%, 100% { transform: scale(0); } 40% { transform: scale(1.0); } }
    </style>
</head>
<body>

    <header class="header">
        <span>Using A Technology-Enhanced Flipped Classroom Model to Develop EFL Engineering Students’ Punctuation Marks</span>
        <a href="https://mazenegykfs.github.io/Flipped-Classroom/index.html" class="btn btn-blue">Home</a>
    </header>

    <div class="container mx-auto p-4 md:p-8">
        <h1 class="text-3xl md:text-4xl font-bold text-center mb-8">Using Dashes and Hyphens</h1>

        <!-- Objectives -->
        <div class="card">
            <h2 class="text-2xl font-bold mb-4">1. Objectives</h2>
            <ul class="list-disc list-inside space-y-2 mt-2">
                <li>Differentiate between an em dash (—) and a hyphen (-).</li>
                <li>Correctly use em dashes to emphasize or set off non-essential information.</li>
                <li>Use hyphens to form compound adjectives that precede a noun.</li>
                <li>Avoid common hyphenation errors, such as hyphenating adverbs ending in "-ly".</li>
            </ul>
        </div>

        <!-- Review & Warm-up -->
        <div class="grid md:grid-cols-2 gap-6">
            <div class="card">
                <h2 class="text-2xl font-bold mb-4">2. Review</h2>
                <p class="mb-2"><strong>Hyphens (-)</strong> join words together, while <strong>em dashes (—)</strong> separate parts of a sentence. Using them correctly is crucial for clarity in technical writing. A hyphen is short, connecting words like "state-of-the-art." An em dash is longer, creating a pause—like this one.</p>
            </div>
            <div class="card">
                <h2 class="text-2xl font-bold mb-4">3. Warm-up</h2>
                <p class="mb-2">What is the difference in meaning between these two phrases?</p>
                <p class="italic">1. A small-business owner</p>
                <p class="italic">2. A small business owner</p>
                <button id="reveal-warmup-btn" class="btn btn-green mt-2">Reveal Explanation</button>
                <div id="warmup-explanation" class="explanation">
                    Phrase 1 (with a hyphen) describes the owner of a small business. Phrase 2 describes a business owner who is physically small. The hyphen's presence completely changes the meaning.
                </div>
            </div>
        </div>
        
        <!-- Presentation -->
        <div class="card">
            <h2 class="text-2xl font-bold mb-4">4. Presentation: Key Rules for Dashes & Hyphens</h2>
            <div class="grid md:grid-cols-2 gap-x-8 gap-y-6">
                 <div>
                    <h3 class="text-xl font-semibold">The Em Dash (—)</h3>
                    <p class="mt-1"><b>Rule:</b> Use to set off or emphasize extra information, or to indicate a sudden break in thought.</p>
                    <p class="mt-1 p-2 bg-gray-100 rounded-md">The final component—a custom-built processor—arrived today.</p>
                </div>
                <div>
                    <h3 class="text-xl font-semibold">The Hyphen (-)</h3>
                    <p class="mt-1"><b>Rule:</b> Use to join two or more words into a single compound adjective that comes <em>before</em> a noun.</p>
                    <p class="mt-1 p-2 bg-gray-100 rounded-md">We conducted a <span class="font-bold text-blue-700">large-scale</span> test.</p>
                    <p class="mt-1 p-2 bg-gray-100 rounded-md"><b>But not after:</b> The test was <span class="font-bold text-red-700">large scale</span>.</p>
                </div>
                 <div>
                    <h3 class="text-xl font-semibold">No Hyphen with "-ly" Adverbs</h3>
                    <p class="mt-1"><b>Rule:</b> Do not use a hyphen to connect an adverb ending in "-ly" to an adjective.</p>
                     <p class="mt-1 p-2 bg-gray-100 rounded-md"><b>Correct:</b> A <span class="font-bold text-blue-700">highly efficient</span> motor.</p>
                     <p class="mt-1 p-2 bg-red-100 rounded-md"><b>Incorrect:</b> A <span class="font-bold text-red-700">highly-efficient</span> motor.</p>
                </div>
                <div>
                    <h3 class="text-xl font-semibold">Hyphens with Numbers</h3>
                    <p class="mt-1"><b>Rule:</b> Use a hyphen for compound numbers from twenty-one to ninety-nine and for fractions used as adjectives.</p>
                    <p class="mt-1 p-2 bg-gray-100 rounded-md">There were <span class="font-bold text-blue-700">twenty-seven</span> errors. A <span class="font-bold text-blue-700">two-thirds</span> majority is needed.</p>
                </div>
            </div>

            <!-- Embedded YouTube Video -->
            <div class="mt-8">
                <h3 class="text-xl font-semibold mb-4">Video Lesson: Dashes and Hyphens</h3>
                <div class="aspect-w-16 aspect-h-9">
                    <iframe 
                        class="w-full h-full rounded-lg"
                        src="https://www.youtube.com/embed/D86QxslbnHc" 
                        title="YouTube video player" 
                        frameborder="0" 
                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                        allowfullscreen>
                    </iframe>
                </div>
            </div>
        </div>

        <!-- Interactive Practice: Dash or Hyphen? -->
        <div class="card">
            <h2 class="text-2xl font-bold mb-4">5. Interactive Practice: Dash or Hyphen?</h2>
            <p class="mb-4">For each sentence, identify the error or what is missing.</p>
            <div id="interactive-practice-section" class="space-y-6">
                <!-- Questions will be injected here by JS -->
            </div>
             <div class="mt-4 text-right">
                <button onclick="resetSection('interactive-practice-section', interactivePracticeQuestions)" class="btn btn-red">Reset</button>
            </div>
        </div>

        <!-- Practice -->
        <div class="card">
            <h2 class="text-2xl font-bold mb-4">6. Practice</h2>
            <p class="mb-4">Choose the option that is punctuated correctly.</p>
            <div id="practice-section" class="space-y-6">
                <!-- Practice questions will be injected here by JS -->
            </div>
             <div class="mt-4 text-right">
                <button onclick="resetSection('practice-section', practiceQuestions)" class="btn btn-red">Reset</button>
            </div>
        </div>

        <!-- Assessment -->
        <div class="card">
            <h2 class="text-2xl font-bold mb-4">7. Assessment</h2>
            <p class="mb-4">Choose the option that is punctuated correctly and most professionally.</p>
            <div id="assessment-section" class="space-y-6">
                 <!-- Assessment questions will be injected here by JS -->
            </div>
             <div class="mt-4 text-right">
                <button onclick="resetSection('assessment-section', assessmentQuestions)" class="btn btn-red">Reset</button>
            </div>
        </div>
        
        <!-- Assignment -->
        <div class="card">
            <h2 class="text-2xl font-bold mb-4">8. Assignment: Final Quiz</h2>
            <p class="mb-4">Choose the option that is punctuated correctly.</p>
            <div id="assignment-section" class="space-y-6">
                <!-- Assignment questions will be injected here by JS -->
            </div>
            <div id="assignment-results" class="mt-6 text-xl font-bold text-center"></div>
             <div class="mt-4 text-right">
                <button onclick="resetSection('assignment-section', assignmentQuestions, true)" class="btn btn-red">Reset</button>
            </div>
        </div>

        <!-- Export Worksheet Section -->
        <div class="card text-center">
            <h2 class="text-2xl font-bold mb-4">Download Worksheet</h2>
            <p class="mb-4">Click the button below to download a text file of this lesson's exercises for offline practice.</p>
            <button onclick="downloadWorksheet()" class="btn btn-green">Export Worksheet (.txt)</button>
        </div>

        <!-- Further Reading Section -->
        <div class="card">
            <h2 class="text-2xl font-bold mb-4">Further Reading & References</h2>
            <p class="mb-4">For more detailed explanations and examples, please visit these reputable online writing resources:</p>
            <ul class="list-disc list-inside space-y-2">
                <li><a href="https://owl.purdue.edu/owl/general_writing/punctuation/hyphen_use.html" target="_blank" class="text-blue-600 hover:underline">Purdue OWL: Hyphen Use</a></li>
                <li><a href="https://www.grammarly.com/blog/hyphen/" target="_blank" class="text-blue-600 hover:underline">Grammarly Blog: How to Use Hyphens</a></li>
                <li><a href="https://www.thesaurus.com/e/grammar/em-dash/" target="_blank" class="text-blue-600 hover:underline">Thesaurus.com: What Is an Em Dash?</a></li>
            </ul>
        </div>
    </div>

    <!-- CHATBOT UI -->
    <div class="fixed bottom-8 right-8 z-[999] flex flex-col items-center">
        <p class="font-semibold text-gray-800 bg-white/90 backdrop-blur-sm px-4 py-2 rounded-full shadow-lg mb-2">TechWrite AI Assistant</p>
        <button id="open-chat-btn" title="Open AI Assistant" class="bg-sky-500 text-white w-16 h-16 rounded-full flex items-center justify-center shadow-lg cursor-pointer transition-transform duration-300 hover:bg-sky-600 hover:scale-110">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" viewBox="0 0 20 20" fill="currentColor">
                <path d="M10 2a6 6 0 00-6 6v3.586l-1.707 1.707A1 1 0 003 15v1a1 1 0 001 1h12a1 1 0 001-1v-1a1 1 0 00-.293-.707L16 11.586V8a6 6 0 00-6-6zM10 18a3 3 0 01-3-3h6a3 3 0 01-3 3z" />
            </svg>
        </button>
    </div>

    <div id="chat-modal" class="hidden">
        <div class="w-full max-w-2xl h-full sm:h-[80vh] flex flex-col bg-slate-50 rounded-2xl shadow-xl border border-gray-200 transform scale-95 transition-transform duration-300">
            <header class="bg-gradient-to-r from-sky-500 to-indigo-500 text-white text-center p-3 shadow-md rounded-t-2xl flex justify-between items-center">
                <h1 class="text-lg font-bold flex-1 text-center">TechWrite AI Assistant</h1>
                <button id="close-chat-btn" class="text-white hover:bg-white/20 rounded-full p-1">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
                </button>
            </header>
            <div id="chat-window" class="flex-1 p-6 space-y-4 overflow-y-auto">
                <div class="chat-bubble bot-bubble p-4 rounded-lg rounded-bl-none">
                    <p class="font-bold text-sky-700">TechWrite Tutor</p>
                    <p class="text-gray-700">Hello! I can help you with **dashes and hyphens**. Ask me about compound adjectives, em dashes, or anything else from this lesson.</p>
                </div>
            </div>
            <div class="p-4 bg-white border-t border-gray-200 rounded-b-2xl">
                <form id="chat-form" class="flex items-center space-x-4">
                    <input id="user-input" type="text" placeholder="e.g., When should I use a hyphen?" class="flex-1 p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-500 focus:outline-none" autocomplete="off">
                    <button id="send-btn" type="submit" class="bg-green-500 hover:bg-green-600 text-white font-bold p-3 rounded-lg shadow-md hover:shadow-lg transition-transform duration-200 transform hover:scale-105">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8" /></svg>
                    </button>
                </form>
            </div>
        </div>
    </div>

    <script>
        const interactivePracticeQuestions = [
             {
                question: "The easy to use interface was a key selling point.",
                options: [
                    "Needs a dash after 'interface'",
                    "Needs a hyphen in 'easy-to-use'",
                    "Needs a hyphen in 'selling-point'",
                    "Correct as is"
                ],
                answer: 1,
                explanation: "'Easy-to-use' is a compound adjective that comes before the noun 'interface', so it must be hyphenated."
            },
            {
                question: "The final test which took three hours was successful.",
                options: [
                    "Use dashes: 'test—which took three hours—was'",
                    "Use hyphens: 'test-which took three hours-was'",
                    "Correct as is",
                    "Needs a comma after 'test'"
                ],
                answer: 0,
                explanation: "Em dashes are a strong choice here to set off the non-essential clause and add emphasis."
            }
        ];

        const practiceQuestions = [
            {
                question: "Which sentence uses a hyphen correctly?",
                options: [
                    "This is a high-performance computer.",
                    "This is a high performance computer.",
                    "This computer is high-performance."
                ],
                answer: 0,
                explanation: "The compound adjective 'high-performance' comes before the noun 'computer' and must be hyphenated."
            },
            {
                question: "Which sentence uses an em dash correctly?",
                options: [
                    "The software-which I highly recommend-is easy to use.",
                    "The software, which I highly recommend, is easy to use.",
                    "The software—which I highly recommend—is easy to use."
                ],
                answer: 2,
                explanation: "The em dash is used correctly here to set off the parenthetical phrase 'which I highly recommend' for emphasis."
            },
            {
                question: "Which sentence is correctly punctuated?",
                options: [
                    "The widely-used protocol is now obsolete.",
                    "The widely used protocol is now obsolete.",
                    "The widely-used-protocol is now obsolete."
                ],
                answer: 1,
                explanation: "No hyphen is needed with an adverb ending in '-ly'. 'Widely' modifies 'used' but is not joined with a hyphen."
            }
        ];

        const assessmentQuestions = [
            {
                question: "Which sentence is most professional and correct?",
                options: [
                    "The material is stress-resistant at high temperatures.",
                    "The material is stress resistant at high temperatures.",
                    "The stress-resistant material works well at high temperatures."
                ],
                answer: 2,
                explanation: "This is the clearest and most professional option. 'Stress-resistant' is a compound adjective before the noun 'material'. Option 1 is incorrect because the adjective comes after the noun. Option 2 is also technically correct but less common in formal writing than option 3."
            },
            {
                question: "Identify the correctly punctuated sentence.",
                options: [
                    "The system has one goal-to improve efficiency.",
                    "The system has one goal: to improve efficiency.",
                    "The system has one goal—to improve efficiency."
                ],
                answer: 2,
                explanation: "An em dash is used here to provide a strong, emphatic explanation of what the one goal is. A colon would also be acceptable, but a hyphen is incorrect."
            },
            {
                question: "Which sentence correctly uses hyphens?",
                options: [
                    "The project requires a twenty-five-page report.",
                    "The project requires a twenty five page report.",
                    "The project report is twenty-five-pages."
                ],
                answer: 0,
                explanation: "'Twenty-five-page' acts as a single adjective modifying 'report' and must be fully hyphenated. 'Twenty-five' is also hyphenated as a compound number."
            }
        ];

        const assignmentQuestions = [
            {
                question: "Which of the following is correct?",
                options: [
                    "A two-thirds majority is required.",
                    "A two thirds majority is required.",
                    "The majority required is two-thirds."
                ],
                answer: 0,
                explanation: "When a fraction is used as a compound adjective before a noun, it should be hyphenated."
            },
            {
                question: "Which is the correct way to write this sentence?",
                options: [
                    "Follow the step by step instructions.",
                    "Follow the step-by-step instructions.",
                    "The instructions are step-by-step."
                ],
                answer: 1,
                explanation: "'Step-by-step' is a compound adjective describing 'instructions' and must be hyphenated."
            },
            {
                question: "Select the correctly punctuated sentence.",
                options: [
                    "The company’s long term strategy was effective.",
                    "The company’s long-term-strategy was effective.",
                    "The company’s long-term strategy was effective."
                ],
                answer: 2,
                explanation: "The compound adjective 'long-term' precedes the noun 'strategy' and requires a hyphen."
            },
            {
                question: "Which sentence is correct?",
                options: [
                    "This well-known problem needs a solution.",
                    "This well known problem needs a solution.",
                    "This problem is well-known."
                ],
                answer: 0,
                explanation: "'Well-known' is a compound adjective modifying 'problem' and must be hyphenated. When it comes after the noun, as in 'The problem is well known,' it is often not hyphenated."
            }
        ];
        
        let assignmentScore = 0;
        let assignmentAnswered = 0;

        function createMCQSection(containerId, questions, isAssignment = false) {
            const container = document.getElementById(containerId);
            container.innerHTML = '';
            
            questions.forEach((q, qIndex) => {
                const qDiv = document.createElement('div');
                let optionsHTML = '';
                q.options.forEach((option, oIndex) => {
                    optionsHTML += `
                        <div class="flex items-center">
                            <input type="radio" id="${containerId}-q${qIndex}o${oIndex}" name="${containerId}-q${qIndex}" value="${oIndex}" class="h-4 w-4 text-indigo-600 border-gray-300 focus:ring-indigo-500">
                            <label for="${containerId}-q${qIndex}o${oIndex}" class="ml-3 block text-sm text-gray-900">${option}</label>
                        </div>
                    `;
                });

                qDiv.innerHTML = `
                    <p class="font-medium text-gray-800">${qIndex + 1}. ${q.question}</p>
                    <div id="${containerId}-feedback-q${qIndex}" class="space-y-2 mt-2">${optionsHTML}</div>
                    <div id="${containerId}-explanation-q${qIndex}" class="explanation"></div>
                `;
                container.appendChild(qDiv);

                const optionsContainer = document.getElementById(`${containerId}-feedback-q${qIndex}`);
                optionsContainer.addEventListener('change', (event) => {
                    if(event.target.type === 'radio') {
                        handleMCQSelection(containerId, qIndex, questions, isAssignment);
                    }
                });
            });
        }
        
        function handleMCQSelection(containerId, qIndex, questions, isAssignment) {
            const q = questions[qIndex];
            const feedbackDiv = document.getElementById(`${containerId}-feedback-q${qIndex}`);
            const selectedRadio = feedbackDiv.querySelector(`input[name="${containerId}-q${qIndex}"]:checked`);
            
            if (!selectedRadio) return;

            const userAnswer = parseInt(selectedRadio.value);
            const radios = feedbackDiv.querySelectorAll(`input[name="${containerId}-q${qIndex}"]`);
            
            radios.forEach(radio => {
                radio.disabled = true;
                const label = feedbackDiv.querySelector(`label[for="${radio.id}"]`);
                label.classList.remove('correct-answer', 'incorrect-answer');

                const radioValue = parseInt(radio.value);
                if (radioValue === q.answer) {
                    label.classList.add('correct-answer');
                } else if (radioValue === userAnswer) {
                    label.classList.add('incorrect-answer');
                }
            });

            const explanationDiv = document.getElementById(`${containerId}-explanation-q${qIndex}`);
            if (explanationDiv && q.explanation) {
                explanationDiv.innerHTML = `<b>Explanation:</b> ${q.explanation}`;
                explanationDiv.classList.add('show');
            }

            if(isAssignment) {
                if(!selectedRadio.parentElement.hasAttribute('data-scored')) {
                     if(userAnswer === q.answer) {
                        assignmentScore++;
                    }
                    assignmentAnswered++;
                    radios.forEach(r => r.parentElement.setAttribute('data-scored', 'true'));
                }
                const resultsDiv = document.getElementById('assignment-results');
                resultsDiv.textContent = `Score: ${assignmentScore} out of ${questions.length}`;
            }
        }
        
        function resetSection(containerId, questions, isAssignment = false) {
            if (isAssignment) {
                assignmentScore = 0;
                assignmentAnswered = 0;
                const resultsDiv = document.getElementById('assignment-results');
                resultsDiv.textContent = '';
            }
            createMCQSection(containerId, questions, isAssignment);
        }

        function formatQuestionsForWorksheet(title, questions) {
            let text = `\n\n--- ${title} ---\n\n`;
            text += `Instructions: Choose the option that is punctuated correctly and professionally.\n\n`;
            questions.forEach((q, index) => {
                text += `${index + 1}. ${q.question || "Choose the correctly punctuated sentence."}\n`;
                q.options.forEach((opt, optIndex) => {
                    text += `   ${String.fromCharCode(97 + optIndex)}) ${opt}\n`;
                });
                text += '\n';
            });
            return text;
        }

        function downloadWorksheet() {
            let worksheetContent = `Worksheet: Using Dashes and Hyphens\n`;
            worksheetContent += `Using A Technology-Enhanced Flipped Classroom Model to Develop EFL Engineering Students’ Punctuation Marks\n`;
            worksheetContent += `=================================================================\n\n`;

            worksheetContent += `** Part 1: Key Rules **\n\n`;
            worksheetContent += `Em Dash (—): Used to set off or emphasize extra information.\n- Example: The final component—a custom-built processor—arrived today.\n\n`;
            worksheetContent += `Hyphen (-): Used to join words into a compound adjective before a noun.\n- Example: We conducted a large-scale test.\n\n`;
            
            worksheetContent += formatQuestionsForWorksheet("Part 2: Interactive Practice Questions", interactivePracticeQuestions);
            worksheetContent += formatQuestionsForWorksheet("Part 3: Practice Questions", practiceQuestions);
            worksheetContent += formatQuestionsForWorksheet("Part 4: Assessment Questions", assessmentQuestions);
            worksheetContent += formatQuestionsForWorksheet("Part 5: Assignment Questions", assignmentQuestions);

            const blob = new Blob([worksheetContent], { type: 'text/plain;charset=utf-8' });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = 'dashes_and_hyphens_worksheet.txt';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }


        document.addEventListener('DOMContentLoaded', () => {
            // Warm-up button
            const revealBtn = document.getElementById('reveal-warmup-btn');
            const warmupExplanation = document.getElementById('warmup-explanation');
            revealBtn.addEventListener('click', () => {
                warmupExplanation.classList.toggle('show');
                revealBtn.textContent = warmupExplanation.classList.contains('show') ? 'Hide Explanation' : 'Reveal Explanation';
            });

            createMCQSection('interactive-practice-section', interactivePracticeQuestions);
            createMCQSection('practice-section', practiceQuestions);
            createMCQSection('assessment-section', assessmentQuestions);
            createMCQSection('assignment-section', assignmentQuestions, true);
        });
    </script>
     <!-- --- CHATBOT SCRIPT --- -->
     <script>
        const chatModal = document.getElementById('chat-modal');
        const openChatBtn = document.getElementById('open-chat-btn');
        const closeChatBtn = document.getElementById('close-chat-btn');
        const chatWindow = document.getElementById('chat-window');
        const chatForm = document.getElementById('chat-form');
        const userInput = document.getElementById('user-input');
        const sendBtn = document.getElementById('send-btn');

        const API_MODEL = 'gemini-2.5-flash-preview-05-20';
        const API_KEY = "AIzaSyB8IlKHHSJY28PIs_Zob2d7-HSD6UyXPFo";

        openChatBtn.addEventListener('click', () => {
            chatModal.classList.remove('hidden');
            chatModal.classList.add('visible');
            setTimeout(() => chatModal.querySelector('div').classList.remove('scale-95'), 10);
            userInput.focus();
        });

        closeChatBtn.addEventListener('click', () => {
            chatModal.querySelector('div').classList.add('scale-95');
            chatModal.classList.remove('visible');
             setTimeout(() => chatModal.classList.add('hidden'), 300);
        });

        const SYSTEM_PROMPT = `You are an expert AI tutor named 'TechWrite Tutor', specializing in technical writing for engineering students. You are an assistant for a course page developed by Dr. Mazen Badawy and Dr. Nourhan Adel El-Banna. Your current focus is the lesson page titled "Using Dashes and Hyphens in Technical Writing."

        **Your Knowledge Base:**

        1.  **Current Lesson:** You are an expert on the rules for dashes and hyphens on this page. This includes: 
            * Differentiating between an em dash (—) for emphasis/breaks and a hyphen (-) for joining words.
            * Correctly using hyphens to form compound adjectives before a noun (e.g., 'a state-of-the-art device') but not after ('the device is state of the art').
            * Knowing not to hyphenate adverbs ending in '-ly' (e.g., 'a highly efficient motor').
            * Knowing how to hyphenate compound numbers and fractions.
        
        2.  **General Technical Writing Guidelines (from your core training):**
            * **Report Structure:** You know the structure of an engineering report (Abstract, Introduction, etc.).
            * **Formal Style:** You must promote formal, objective language. Advise against contractions and clichés. Prefer Latinate verbs (e.g., 'perform' not 'do').
            * **Visuals & Tables:** Remind students that all figures and tables MUST be numbered, titled, and referenced in the text.
            * **Citations:** You must strictly enforce the IEEE citation style when asked.

        **Interaction Rules:**
        * Your tone is encouraging, professional, and clear.
        * When a student asks about dashes or hyphens, relate your answer directly to the rules taught in this lesson and provide a clear, engineering-specific example.
        * If a question is about another punctuation mark, briefly answer it but gently guide them back to the main topic of dashes and hyphens or suggest they visit the homepage for other lessons.
        * Use Markdown (bolding, lists) to format your answers for readability.
        * Do not answer questions outside the scope of technical writing and punctuation.`;
        
        function addMessage(message, sender) {
            const bubble = document.createElement('div');
            bubble.className = `chat-bubble p-4 rounded-lg ${sender === 'user' ? 'user-bubble' : 'bot-bubble'}`;
            let formattedMessage = message.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>').replace(/\n/g, '<br>');
            bubble.innerHTML = `<p>${formattedMessage}</p>`;
            chatWindow.appendChild(bubble);
            chatWindow.scrollTop = chatWindow.scrollHeight;
        }

        function toggleTypingIndicator(show) {
            let indicator = document.getElementById('typing-indicator');
            if (show && !indicator) {
                indicator = document.createElement('div');
                indicator.id = 'typing-indicator';
                indicator.className = 'typing-indicator chat-bubble bot-bubble';
                indicator.innerHTML = '<span></span><span></span><span></span>';
                chatWindow.appendChild(indicator);
                chatWindow.scrollTop = chatWindow.scrollHeight;
            } else if (!show && indicator) {
                indicator.remove();
            }
        }
        
        async function handleSendMessage(e) {
            e.preventDefault();
            if (!API_KEY || API_KEY === "YOUR_API_KEY_HERE") {
                 addMessage("The AI Assistant is not configured correctly. Please notify your instructor.", 'bot');
                 return;
            }
            const userMessage = userInput.value.trim();
            if (!userMessage) return;

            addMessage(userMessage, 'user');
            userInput.value = '';
            userInput.disabled = true;
            sendBtn.disabled = true;

            toggleTypingIndicator(true);

            try {
                const botResponse = await callGeminiApi(userMessage);
                addMessage(botResponse, 'bot');
            } catch (error) {
                console.error('API Call Error:', error);
                addMessage('Sorry, I encountered an error. Please try again later.', 'bot');
            } finally {
                toggleTypingIndicator(false);
                userInput.disabled = false;
                sendBtn.disabled = false;
                userInput.focus();
            }
        }

        async function callGeminiApi(userQuery) {
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/${API_MODEL}:generateContent?key=${API_KEY}`;
            const payload = {
                contents: [{ parts: [{ text: userQuery }] }],
                systemInstruction: { parts: [{ text: SYSTEM_PROMPT }] },
            };

            const response = await fetch(apiUrl, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(payload)
            });

            if (!response.ok) {
                throw new Error(`API Error: ${response.status} ${response.statusText}`);
            }

            const result = await response.json();
            const candidate = result.candidates?.[0];
            if (candidate && candidate.content?.parts?.[0]?.text) {
                return candidate.content.parts[0].text;
            } else {
                if (result.promptFeedback && result.promptFeedback.blockReason) {
                    return `I'm sorry, I can't respond to that for safety reasons: ${result.promptFeedback.blockReason}.`;
                }
                throw new Error('Invalid response structure from API');
            }
        }

        chatForm.addEventListener('submit', handleSendMessage);
    </script>
</body>
</html>
